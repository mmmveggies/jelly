{"version":3,"sources":["util/color.ts","util/mouse.ts","shapes/eye.ts","render.ts","app.ts"],"names":[],"mappings":"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","file":"app.67efffeb.js","sourceRoot":"..\\src","sourcesContent":["\r\n/**\r\n * A representation of the HSL color space https://hslpicker.com/\r\n */\r\nexport class HSLA {\r\n\thue = 0\r\n\tsaturation = '25%'\r\n\tluminosity = '50%'\r\n\talpha = 1\r\n\r\n\t/**\r\n\t * Rotate `this.hue` by `hueDelta` degrees and return the string value.\r\n\t */\r\n\trotate(hueDelta = 1) {\r\n\t\tconst next = this.hue + hueDelta\r\n\t\tthis.hue = Number.isSafeInteger(next) ? next : 0\r\n\t\treturn this.toString()\r\n\t}\r\n\r\n\t/**\r\n\t * Encode to something usable by style, canvas etc.\r\n\t */\r\n\ttoString() {\r\n\t\tconst {\r\n\t\t\thue: h,\r\n\t\t\tsaturation: s,\r\n\t\t\tluminosity: l,\r\n\t\t\talpha: a,\r\n\t\t} = this\r\n\t\treturn `hsla(${[h, s, l, a].join()})`\r\n\t}\r\n}","export class Mouse {\r\n\tprev?: MouseEvent\r\n\tcurr?: MouseEvent\r\n\r\n\tdown?: MouseEvent\r\n\tup?: MouseEvent\r\n\r\n\tget speeds() {\r\n\t\treturn {\r\n\t\t\tdx: this.curr?.clientX - this.prev?.clientX,\r\n\t\t\tdy: this.curr?.clientX - this.prev?.clientX,\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tthis.on()\r\n\t}\r\n\r\n\ton() {\r\n\t\twindow.addEventListener('mousemove', this.onmousemove)\r\n\t\twindow.addEventListener('mousedown', this.onmousedown)\r\n\t\twindow.addEventListener('mouseup', this.onmouseup)\r\n\t}\r\n\r\n\toff() {\r\n\t\twindow.removeEventListener('mousemove', this.onmousemove)\r\n\t\twindow.removeEventListener('mousedown', this.onmousedown)\r\n\t\twindow.removeEventListener('mouseup', this.onmouseup)\r\n\t}\r\n\r\n\tprivate onmousemove = (event: MouseEvent) => {\r\n\t\tthis.prev = this.curr\r\n\t\tthis.curr = event\r\n\t}\r\n\tprivate onmousedown = (event: MouseEvent) => {\r\n\t\tthis.down = event\r\n\t\tthis.up = undefined\r\n\t}\r\n\tprivate onmouseup = (event: MouseEvent) => {\r\n\t\tthis.up = event\r\n\t}\r\n}\r\n\r\nexport const mouse = new Mouse()","import { Mouse } from \"../util/mouse\"\r\n\r\nexport class Eye {\r\n\tx!: number\r\n\ty!: number\r\n\tr!: number\r\n\r\n\tpupil?: Eye\r\n\r\n\tconstructor(props?: any, children = 4) {\r\n\t\tObject.assign(this, props)\r\n\r\n\t\tif (children >= 0) {\r\n\t\t\tthis.pupil = new Eye({\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y,\r\n\t\t\t\tr: this.r / 3,\r\n\t\t\t}, children - 1)\r\n\t\t}\r\n\t}\r\n\r\n\tlook(mouse: Mouse) {\r\n\t\tif (!this.pupil) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst dx = (mouse.curr?.clientX - this.x)\r\n\t\tconst dy = (mouse.curr?.clientY - this.y)\r\n\r\n\t\tconst limit = this.r - this.pupil.r\r\n\t\tconst scale = Math.sqrt(dx ** 2 + dy ** 2)\r\n\t\tconst theta = Math.atan2(dy, dx)\r\n\r\n\t\tconst r = Math.min(scale, limit)\r\n\r\n\t\tthis.pupil.x = this.x + r * Math.cos(theta)\r\n\t\tthis.pupil.y = this.y + r * Math.sin(theta)\r\n\r\n\t\tthis.pupil.look(mouse)\r\n\t}\r\n}","import { ctx } from './app'\r\nimport { HSLA } from './util/color'\r\nimport { mouse } from './util/mouse'\r\nimport { Eye } from './shapes/eye'\r\n\r\nconst hsla = new HSLA()\r\n\r\nconst pencils = new Image()\r\npencils.src = require('./images/pencils.png')\r\n\r\nconst PI2 = Math.PI * 2\r\n\r\nexport function render(time: number) {\r\n\tconst {\r\n\t\tinnerWidth: width,\r\n\t\tinnerHeight: height,\r\n\t} = window\r\n\r\n\tconst color = hsla.rotate()\r\n\r\n\tctx.fillStyle = color\r\n\tctx.fillRect(0, 0, width, height)\r\n\r\n\tconst eyes = [\r\n\t\tnew Eye({\r\n\t\t\tx: width / 3,\r\n\t\t\ty: height / 2,\r\n\t\t\tr: height / 4,\r\n\t\t}),\r\n\t\tnew Eye({\r\n\t\t\tx: 2 * width / 3,\r\n\t\t\ty: height / 2,\r\n\t\t\tr: height / 4,\r\n\t\t}),\r\n\t]\r\n\r\n\teyes.forEach((eye) => {\r\n\t\tlet curr = eye\r\n\t\twhile (curr) {\r\n\t\t\tcurr.look(mouse)\r\n\t\t\tctx.fillStyle = hsla.rotate(180)\r\n\t\t\tcircle(eye)\r\n\t\t\tctx.fill()\r\n\t\t\tcurr = eye.pupil\r\n\t\t}\r\n\t})\r\n\r\n\t// // right eye sclera\r\n\t// ctx.beginPath()\r\n\t// circle(right)\r\n\t// ctx.fillStyle = hsla.rotate(-180)\r\n\t// ctx.fill()\r\n\r\n\r\n\t// // right pupil\r\n\t// ctx.beginPath()\r\n\t// ctx.arc(rightPupil.x, rightPupil.y, pupil.r, 0, PI2, false)\r\n\t// ctx.fillStyle = hsla.rotate(-180)\r\n\t// ctx.fill()\r\n}\r\n\r\nfunction circle(eye: { x: number, y: number, r: number }) {\r\n\tctx.beginPath()\r\n\tctx.arc(eye.x, eye.y, eye.r, 0, PI2, false)\r\n\tctx.fill()\r\n}","import { render } from \"./render\"\r\n\r\nexport const canvas = document.getElementById('root') as HTMLCanvasElement\r\nexport const ctx = canvas.getContext('2d')\r\n\r\nwindow.addEventListener('resize', resizeCanvas, false)\r\nresizeCanvas()\r\nengine(render)\r\n\r\nfunction engine(\r\n\tframe: (time: number) => void\r\n) {\r\n\tfunction step(time: number) {\r\n\t\tframe(time)\r\n\t\trequestAnimationFrame(step)\r\n\t}\r\n\tstep(0)\r\n}\r\n\r\nfunction resizeCanvas() {\r\n\tcanvas.width = window.innerWidth\r\n\tcanvas.height = window.innerHeight\r\n}\r\n"]}