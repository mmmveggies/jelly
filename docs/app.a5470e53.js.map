{"version":3,"sources":["util/color.ts","util/mouse.ts","shapes/eye.ts","render.ts","app.ts"],"names":[],"mappings":"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","file":"app.a5470e53.js","sourceRoot":"..\\src","sourcesContent":["\r\n/**\r\n * A representation of the HSL color space https://hslpicker.com/\r\n */\r\nexport class HSLA {\r\n\thue = 0\r\n\tsaturation = '25%'\r\n\tluminosity = '50%'\r\n\talpha = 1\r\n\r\n\t/**\r\n\t * Rotate `this.hue` by `hueDelta` degrees and return the string value.\r\n\t */\r\n\trotate(hueDelta = 1) {\r\n\t\tconst next = this.hue + hueDelta\r\n\t\tthis.hue = Number.isSafeInteger(next) ? next : 0\r\n\t\treturn this.toString()\r\n\t}\r\n\r\n\t/**\r\n\t * Encode to something usable by style, canvas etc.\r\n\t */\r\n\ttoString() {\r\n\t\tconst {\r\n\t\t\thue: h,\r\n\t\t\tsaturation: s,\r\n\t\t\tluminosity: l,\r\n\t\t\talpha: a,\r\n\t\t} = this\r\n\t\treturn `hsla(${[h, s, l, a].join()})`\r\n\t}\r\n}","export class Mouse {\r\n\tprev?: MouseEvent\r\n\tcurr?: MouseEvent\r\n\r\n\tdown?: MouseEvent\r\n\tup?: MouseEvent\r\n\r\n\tget speeds() {\r\n\t\treturn {\r\n\t\t\tdx: this.curr?.clientX - this.prev?.clientX,\r\n\t\t\tdy: this.curr?.clientX - this.prev?.clientX,\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tthis.on()\r\n\t}\r\n\r\n\ton() {\r\n\t\twindow.addEventListener('mousemove', this.onmousemove)\r\n\t\twindow.addEventListener('mousedown', this.onmousedown)\r\n\t\twindow.addEventListener('mouseup', this.onmouseup)\r\n\t\twindow.addEventListener('touchmove', this.ontouchmove)\r\n\t}\r\n\r\n\toff() {\r\n\t\twindow.removeEventListener('mousemove', this.onmousemove)\r\n\t\twindow.removeEventListener('mousedown', this.onmousedown)\r\n\t\twindow.removeEventListener('mouseup', this.onmouseup)\r\n\t\twindow.removeEventListener('touchmove', this.ontouchmove)\r\n\t}\r\n\r\n\tprivate onmousemove = (event: MouseEvent) => {\r\n\t\tthis.prev = this.curr\r\n\t\tthis.curr = event\r\n\t}\r\n\tprivate onmousedown = (event: MouseEvent) => {\r\n\t\tthis.down = event\r\n\t\tthis.up = undefined\r\n\t}\r\n\tprivate onmouseup = (event: MouseEvent) => {\r\n\t\tthis.up = event\r\n\t}\r\n\tprivate ontouchmove = (event: TouchEvent) => {\r\n\t\tthis.prev = this.curr\r\n\t\tthis.curr = event.touches[0] as any\r\n\t}\r\n}\r\n\r\nexport const mouse = new Mouse()","import { Mouse } from \"../util/mouse\"\r\nimport { HSLA } from \"../util/color\"\r\n\r\nexport class Eye {\r\n\tx!: number\r\n\ty!: number\r\n\tr!: number\r\n\r\n\tpupil?: Eye\r\n\r\n\tconstructor(props?: any) {\r\n\t\tObject.assign(this, props)\r\n\r\n\t\tif (this.r > 1) {\r\n\t\t\tthis.pupil = new Eye({\r\n\t\t\t\tx: this.x,\r\n\t\t\t\ty: this.y,\r\n\t\t\t\tr: this.r * 0.8,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tlook(mouse: Mouse) {\r\n\t\tif (!this.pupil) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst dx = mouse.curr?.clientX - this.x\r\n\t\tconst dy = mouse.curr?.clientY - this.y\r\n\r\n\t\tconst distance = Math.sqrt(dx ** 2 + dy ** 2)\r\n\t\tconst limit = this.r - this.pupil.r\r\n\t\tconst r = Math.min(distance, limit)\r\n\r\n\t\tconst theta = Math.atan2(dy, dx)\r\n\t\tthis.pupil.x = this.x + r * Math.cos(theta)\r\n\t\tthis.pupil.y = this.y + r * Math.sin(theta)\r\n\r\n\t\tthis.pupil.look(mouse)\r\n\t}\r\n\r\n\tdraw(\r\n\t\tctx: CanvasRenderingContext2D,\r\n\t\tcolor: HSLA\r\n\t) {\r\n\t\tctx.fillStyle = color.rotate(10)\r\n\t\tctx.beginPath()\r\n\t\tctx.arc(this.x, this.y, this.r, 0, Math.PI * 2, false)\r\n\t\tctx.fill()\r\n\r\n\t\tthis.pupil?.draw(ctx, color)\r\n\t}\r\n}","import { ctx } from './app'\r\nimport { HSLA } from './util/color'\r\nimport { mouse } from './util/mouse'\r\nimport { Eye } from './shapes/eye'\r\n\r\nconst hsla = new HSLA()\r\n\r\nexport function render(\r\n\ttime: number,\r\n\tframe: number\r\n) {\r\n\tconst {\r\n\t\tinnerWidth: width,\r\n\t\tinnerHeight: height,\r\n\t} = window\r\n\r\n\thsla.hue = frame\r\n\r\n\tctx.fillStyle = hsla.toString()\r\n\tctx.fillRect(0, 0, width, height)\r\n\r\n\tconst eyes = [\r\n\t\tnew Eye({\r\n\t\t\tx: width / 3,\r\n\t\t\ty: height / 2,\r\n\t\t\tr: height / 4,\r\n\t\t}),\r\n\t\tnew Eye({\r\n\t\t\tx: 2 * width / 3,\r\n\t\t\ty: height / 2,\r\n\t\t\tr: height / 4,\r\n\t\t}),\r\n\t]\r\n\r\n\teyes.forEach((eye, i) => {\r\n\t\tconst color = new HSLA()\r\n\t\tcolor.rotate(i * 60 + frame)\r\n\t\teye.look(mouse)\r\n\t\teye.draw(ctx, color)\r\n\t})\r\n}","import { render } from \"./render\"\r\n\r\nexport const canvas = document.getElementById('root') as HTMLCanvasElement\r\nexport const ctx = canvas.getContext('2d')\r\n\r\nwindow.addEventListener('resize', resizeCanvas, false)\r\nresizeCanvas()\r\nengine(render)\r\n\r\nfunction engine(\r\n\tdraw: (time: number, frame: number) => void\r\n) {\r\n\tlet frame = 0\r\n\tfunction step(time: number) {\r\n\t\tdraw(time, frame)\r\n\t\tframe += 1\r\n\t\trequestAnimationFrame(step)\r\n\t}\r\n\tstep(0)\r\n}\r\n\r\nfunction resizeCanvas() {\r\n\tcanvas.width = window.innerWidth\r\n\tcanvas.height = window.innerHeight\r\n}\r\n"]}